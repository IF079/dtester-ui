<form [formGroup]="form" (ngSubmit)="onSubmit(form.value)">
  <h2 mat-dialog-title>Додати студента</h2>
  <mat-dialog-content>
    <div class="col-md-12">
      <div class="row">
        <div class="col-md-12">
          <mat-card class="info-block" id="topInfo">
            <mat-card-title>Загальна інформація</mat-card-title>
            <mat-card-content class="row">
              <div class="col-md-5" id="photoBlock">
                <div *ngIf="dropPhoto; else emptyPhoto" id="profPhoto"
                     [ngStyle]="{'background-image' : 'url(' + dropPhoto + ')'}">
                  <input type="file" id="imageUpload" accept='image/*' (change)="filesSelect($event)">
                  <label for="imageUpload" id="fa-plus-block">
                    <i class="fa fa-plus" aria-hidden="true"></i>
                  </label>
                </div>
                <ng-template #emptyPhoto>
                  <input type="file" id="imageUpload" accept='image/*' (change)="filesSelect($event)">
                  <label id="emptyPhoto" for="imageUpload">Click here to upload your photo</label>
                </ng-template>
              </div>
              <div class="col-md-7" id="fioBlock">
                <mat-form-field>
                  <input matInput placeholder="{{placeholders.sname}}" formControlName="sname">
                  <mat-error *ngIf="!form.controls['sname'].valid && form.controls['sname'].touched">
                    {{errorEmptyInput}}
                  </mat-error>
                </mat-form-field>
                <mat-form-field>
                  <input matInput placeholder="{{placeholders.name}}" formControlName="name">
                  <mat-error *ngIf="!form.controls['name'].valid && form.controls['name'].touched">{{errorEmptyInput}}
                  </mat-error>
                </mat-form-field>
                <mat-form-field>
                  <input matInput placeholder="{{placeholders.fname}}" formControlName="fname">
                  <mat-error *ngIf="!form.controls['fname'].valid && form.controls['fname'].touched">
                    {{errorEmptyInput}}
                  </mat-error>
                </mat-form-field>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6">
          <mat-card class="info-block" id="midInfo">
            <mat-card-title>Додаткова інформація</mat-card-title>
            <mat-card-content class="row">
              <div class="col-md-12">
                <mat-form-field>
                  <input matInput placeholder="{{placeholders.email}}" formControlName="email">
                  <mat-error
                    *ngIf="form.controls['email'].touched && !form.controls['email'].valid && !form.get('email').hasError('emailTaken')">
                    {{errorInvalidEmail}}
                  </mat-error>
                  <mat-error *ngIf="form.get('email').hasError('emailTaken')">{{errorEmailIsTaken}}</mat-error>
                </mat-form-field>
                <mat-form-field>
                  <input matInput placeholder="{{placeholders.gradebookId}}" formControlName="gradebookId">
                  <mat-error *ngIf="!form.controls['gradebookId'].valid && form.controls['gradebookId'].touched">
                    {{errorInvalidGradebook}}
                  </mat-error>
                </mat-form-field>
                <mat-form-field>
                  <mat-select placeholder="{{placeholders.group}}" formControlName="group">
                    <mat-option *ngFor="let group of groups" [value]="group.value">
                      {{group.text}}
                    </mat-option>
                  </mat-select>
                  <mat-error *ngIf="!form.controls['group'].valid && form.controls['group'].touched">
                    {{errorEmptyInput}}
                  </mat-error>
                </mat-form-field>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
        <div class="col-md-6">
          <mat-card class="info-block" id="bottInfo">
            <mat-card-title>Приватні дані</mat-card-title>
            <mat-card-content class="row">
              <div class="col-md-12">
                <mat-form-field>
                  <input matInput placeholder="{{placeholders.username}}" formControlName="username">
                  <mat-error
                    *ngIf="form.controls['username'].touched && !form.controls['username'].valid && !form.get('username').hasError('usernameTaken')">
                    {{errorInvalidUsername}}
                  </mat-error>
                  <mat-error *ngIf="form.get('username').hasError('usernameTaken')">{{errorUsernameIsTaken}}</mat-error>
                </mat-form-field>
                <div formGroupName="passwords">
                  <mat-form-field>
                    <input matInput placeholder="{{placeholders.password}}"
                           [type]="passwordVisible ? 'text' : 'password'" formControlName="password">
                    <mat-icon matSuffix (click)="passwordVisible = !passwordVisible"
                              class="fa {{passwordVisible ? 'fa-unlock' : 'fa-lock'}}"></mat-icon>
                    <mat-error
                      *ngIf="!form.controls['passwords'].get('password').valid && form.controls['passwords'].get('password').touched">
                      {{errorInvalidPassword}}
                    </mat-error>
                  </mat-form-field>
                  <mat-form-field>
                    <input matInput placeholder="{{placeholders.passwordConfirm}}"
                           [type]="passwordVisible ? 'text' : 'password'" formControlName="passwordConfirm">
                    <mat-icon matSuffix (click)="passwordVisible = !passwordVisible"
                              class="fa {{passwordVisible ? 'fa-unlock' : 'fa-lock'}}"></mat-icon>
                    <mat-error
                      *ngIf="!form.controls['passwords'].get('passwordConfirm').valid && form.controls['passwords'].get('passwordConfirm').dirty">
                      {{errorInvalidPasswordConfirm}}
                    </mat-error>
                  </mat-form-field>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </div>
  </mat-dialog-content>
  <mat-dialog-actions>
    <button type="submit" class="modal-button" mat-raised-button color="primary" [disabled]="!form.valid">{{btnAdd}}
    </button>
    <button mat-button mat-dialog-close tabindex="-1">Відмінити</button>
  </mat-dialog-actions>
</form>
